---
title: Distributed Architecture
published: true
---

计算机系统从单机独立工作过渡到多机器协作,集群按照分布式理论构建出复杂的应用服务

* 基础理论
```
SOA: 面向服务架构 
  面向服务的设计模式，最终需要总线集成服务，而且大部分时候还共享数据库，出现单点故障时会导致总线层面的故障

MSA: 微服务架构
  微服务是真正意义上的独立服务，从服务入口到数据持久层，逻辑上都是独立隔离，无需服务总线来接入，但同时增加整个分布式系统的搭建和管理难度，需要对服务进行编排和管理

节点: 就是提供单位服务的的逻辑计算资源的集合
  传统的节点就是一台单体的物理机，所有的服务都融进去包括服务和数据库
  虚拟化技术,单台物理机可以分成多台虚拟机，实现资源利用的最大化 
  容器技术发展，服务已经彻底容器化 

网络: 三种网络工作模式
  1. 同步网络 
    节点同步执行 
    消息延迟有限 
    高效全局锁 
  2. 半同步网络 
    锁范围放宽
  3. 异步网络
    节点独立执行 
    消息延迟无上限 
    无全局锁 
    部分算法不可行

  常用网络传输层协议:
    1. TCP 协议
      首先TCP协议传输可靠，尽管其它协议可以更快传输
      TCP解决重复和乱序问题
    2. UDP 协议
      常量数据流
      丢包不致命

时间: 
  网络时间协议 NTP: 解决不同节点之间的标准时间
  NTP:
    1. 节点间时间不同步 
    2. 硬件时钟漂移
    3. 线程可能休眠 
    4. 操作系统休眠
    5. 硬件休眠 
  逻辑时钟: 定义事件先来后到
  向量时钟:
  原子钟: 

一致性理论:

强一致性ACID:
  Atomicity: 原子性,一个事务中的所有操作，要么完全完成，要么全部不完成，不会结束在中间环节 
  Consistency: 一致性，在事务看开始之前和事务结束以后，数据库的完整性没有被破坏 
  Isolation: 隔离性 数据库允许多个并发事务同时对其数据进行读写和修改的能力 隔离性可以防止多个事务并发执行时，由于交叉执行导致的数据不一致
  Durabilit: 事务处理结束后，对数据的修改就是永久的，即便系统故障也不会丢失

分布式一致性CAP:
  CAP: 分布式计算系统不可能同时保证确保一致性Consistency, 可用性Availabilty, 分区容忍性 Partition 
  FLP: 在异步环境中，如果节点的网络延迟没有上限，只要有一个恶意的节点存在，就没有算法能在有效的时间内达成共识
  DLS: 
    
弱一致性BASE:
  Basically Available: 基本可用 基本可用是指分布式系统在出现故障的时候，允许损失部分可用性，即保证核心可用
  Soft State: 软状态 是指允许系统存在中间状态 中间状态不会影响系统整体可用性
  Eventual Consistency: 最终一致性是指系统中所有数据副本经过一定时间后，最终能够达到一致的状态，弱一致性和强一致性相反，最终一致性是弱一致性的一种特殊情况. 

一致性算法:
  
```
